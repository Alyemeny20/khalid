<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تطبيق زولي للمراسلة - نسخة تجريبية</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/umd/lucide.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;600;700&display=swap');
        
        body {
            font-family: 'Cairo', sans-serif;
            margin: 0;
            padding: 0;
        }
        
        .demo-banner {
            background: linear-gradient(135deg, #0d9488, #14b8a6);
            color: white;
            padding: 10px;
            text-align: center;
            font-size: 14px;
            position: sticky;
            top: 0;
            z-index: 50;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .demo-banner a {
            color: #fef3c7;
            text-decoration: underline;
            margin: 0 5px;
        }
        
        /* تحسين الألوان للتوافق مع Tailwind */
        .bg-teal-600 { background-color: #0d9488 !important; }
        .bg-teal-500 { background-color: #14b8a6 !important; }
        .bg-teal-50 { background-color: #f0fdfa !important; }
        .text-teal-600 { color: #0d9488 !important; }
        .text-teal-200 { color: #99f6e4 !important; }
        .border-teal-600 { border-color: #0d9488 !important; }
        .hover\:bg-teal-700:hover { background-color: #0f766e !important; }
        .hover\:text-teal-600:hover { color: #0d9488 !important; }
        
        /* تحسينات للموبايل */
        @media (max-width: 768px) {
            .desktop-only { display: none !important; }
            .mobile-chat-list { width: 100% !important; }
            .mobile-chat-area { 
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                z-index: 40;
                background: white;
            }
        }
        
        /* انيميشن للرسائل */
        .message-enter {
            animation: messageSlide 0.3s ease-out;
        }
        
        @keyframes messageSlide {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* تحسينات إضافية */
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
    </style>
</head>
<body>
    <div class="demo-banner">
        🚀 <strong>زولي - نسخة تجريبية</strong> | 
        جرب التطبيق واختبر الميزات | 
        <a href="#share">شارك رأيك</a> | 
        <a href="#download">حفظ الملف</a>
    </div>
    
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef, useEffect } = React;
        const { 
            Send, Phone, Video, MoreVertical, Search, 
            Paperclip, Mic, Settings, MessageCircle, 
            Users, Archive, ArrowRight, Download, Share2 
        } = lucide;

        const ZoliApp = () => {
            const [activeChat, setActiveChat] = useState(null);
            const [message, setMessage] = useState('');
            const [activeTab, setActiveTab] = useState('chats');
            const [searchQuery, setSearchQuery] = useState('');
            const [isMobile, setIsMobile] = useState(window.innerWidth <= 768);
            const messagesEndRef = useRef(null);

            // بيانات وهمية للمحادثات
            const [chats, setChats] = useState([
                {
                    id: 1,
                    name: 'أحمد محمد',
                    avatar: '👨‍💻',
                    lastMessage: 'مرحباً، كيف حالك؟',
                    time: '10:30',
                    unread: 2,
                    status: 'online',
                    messages: [
                        { id: 1, text: 'مرحباً! 👋', sender: 'other', time: '10:25' },
                        { id: 2, text: 'كيف حالك اليوم؟', sender: 'other', time: '10:30' },
                    ]
                },
                {
                    id: 2,
                    name: 'سارة أحمد',
                    avatar: '👩‍🎨',
                    lastMessage: 'شكراً لك على المساعدة',
                    time: '09:45',
                    unread: 0,
                    status: 'offline',
                    messages: [
                        { id: 1, text: 'هل يمكنك مساعدتي في المشروع؟', sender: 'other', time: '09:40' },
                        { id: 2, text: 'بالطبع، ما المطلوب؟ 😊', sender: 'me', time: '09:42' },
                        { id: 3, text: 'شكراً لك على المساعدة! 🙏', sender: 'other', time: '09:45' },
                    ]
                },
                {
                    id: 3,
                    name: 'مجموعة العمل',
                    avatar: '👥',
                    lastMessage: 'الاجتماع غداً الساعة 10',
                    time: '08:20',
                    unread: 5,
                    status: 'group',
                    messages: [
                        { id: 1, text: 'صباح الخير جميعاً ☀️', sender: 'other', time: '08:15', senderName: 'محمد' },
                        { id: 2, text: 'صباح النور! 🌅', sender: 'me', time: '08:17' },
                        { id: 3, text: 'الاجتماع غداً الساعة 10 صباحاً', sender: 'other', time: '08:20', senderName: 'فاطمة' },
                        { id: 4, text: 'تم التأكيد ✅', sender: 'other', time: '08:22', senderName: 'علي' },
                    ]
                },
                {
                    id: 4,
                    name: 'عمر خالد',
                    avatar: '👨‍🔬',
                    lastMessage: 'تم إرسال الملف',
                    time: 'أمس',
                    unread: 0,
                    status: 'offline',
                    messages: [
                        { id: 1, text: 'هل وصل الملف المطلوب؟', sender: 'other', time: 'أمس 15:30' },
                        { id: 2, text: 'نعم، تم استلامه بنجاح 📄', sender: 'me', time: 'أمس 15:35' },
                        { id: 3, text: 'ممتاز، شكراً لك! 👍', sender: 'other', time: 'أمس 15:40' },
                    ]
                },
                {
                    id: 5,
                    name: 'ليلى حسن',
                    avatar: '👩‍🏫',
                    lastMessage: 'سأراك في المساء',
                    time: 'الثلاثاء',
                    unread: 0,
                    status: 'online',
                    messages: [
                        { id: 1, text: 'هل أنت متاح هذا المساء؟', sender: 'other', time: 'الثلاثاء 14:20' },
                        { id: 2, text: 'نعم، متاح بعد الساعة 6', sender: 'me', time: 'الثلاثاء 14:25' },
                        { id: 3, text: 'رائع! سأراك في المساء إذن 🌙', sender: 'other', time: 'الثلاثاء 14:30' },
                    ]
                }
            ]);

            useEffect(() => {
                const handleResize = () => {
                    setIsMobile(window.innerWidth <= 768);
                };

                window.addEventListener('resize', handleResize);
                return () => window.removeEventListener('resize', handleResize);
            }, []);

            const sendMessage = () => {
                if (!message.trim() || !activeChat) return;

                const newMessage = {
                    id: Date.now(),
                    text: message,
                    sender: 'me',
                    time: new Date().toLocaleTimeString('ar-SA', { hour: '2-digit', minute: '2-digit' })
                };

                setChats(prevChats =>
                    prevChats.map(chat =>
                        chat.id === activeChat.id
                            ? {
                                ...chat,
                                messages: [...chat.messages, newMessage],
                                lastMessage: message,
                                time: newMessage.time
                            }
                            : chat
                    )
                );

                setMessage('');
            };

            const handleKeyPress = (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            };

            useEffect(() => {
                messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
            }, [activeChat?.messages]);

            const filteredChats = chats.filter(chat =>
                chat.name.toLowerCase().includes(searchQuery.toLowerCase())
            );

            const backToChats = () => {
                setActiveChat(null);
            };

            return (
                <div className="flex h-screen bg-gray-100" style={{height: 'calc(100vh - 50px)'}}>
                    {/* الشريط الجانبي */}
                    <div className={`${isMobile && activeChat ? 'hidden' : 'w-80'} ${isMobile ? 'mobile-chat-list' : ''} bg-white border-l border-gray-200 flex flex-col`}>
                        {/* هيدر التطبيق */}
                        <div className="bg-teal-600 text-white p-4">
                            <div className="flex justify-between items-center mb-4">
                                <h1 className="text-xl font-bold">زولي 💬</h1>
                                <div className="flex gap-2">
                                    <MessageCircle size={20} className="cursor-pointer hover:opacity-80" />
                                    <Settings size={20} className="cursor-pointer hover:opacity-80" />
                                </div>
                            </div>
                            
                            {/* شريط البحث */}
                            <div className="relative">
                                <Search className="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400" size={16} />
                                <input
                                    type="text"
                                    placeholder="البحث في المحادثات"
                                    className="w-full pr-10 pl-4 py-2 rounded-lg bg-teal-500 text-white placeholder-teal-200 border-none outline-none"
                                    value={searchQuery}
                                    onChange={(e) => setSearchQuery(e.target.value)}
                                />
                            </div>
                        </div>

                        {/* التبويبات */}
                        <div className="flex bg-white border-b">
                            {[
                                { id: 'chats', label: 'المحادثات', icon: MessageCircle },
                                { id: 'groups', label: 'المجموعات', icon: Users },
                                { id: 'archived', label: 'المؤرشف', icon: Archive }
                            ].map(tab => {
                                const Icon = tab.icon;
                                return (
                                    <button
                                        key={tab.id}
                                        onClick={() => setActiveTab(tab.id)}
                                        className={`flex-1 py-3 px-2 text-sm font-medium border-b-2 transition-colors ${
                                            activeTab === tab.id
                                                ? 'text-teal-600 border-teal-600'
                                                : 'text-gray-600 border-transparent hover:text-teal-600'
                                        }`}
                                    >
                                        <Icon size={16} className="mx-auto mb-1" />
                                        {tab.label}
                                    </button>
                                );
                            })}
                        </div>

                        {/* قائمة المحادثات */}
                        <div className="flex-1 overflow-y-auto scrollbar-hide">
                            {filteredChats.map(chat => (
                                <div
                                    key={chat.id}
                                    onClick={() => setActiveChat(chat)}
                                    className={`flex items-center p-4 cursor-pointer hover:bg-gray-50 border-b border-gray-100 transition-colors ${
                                        activeChat?.id === chat.id ? 'bg-teal-50' : ''
                                    }`}
                                >
                                    <div className="relative ml-3">
                                        <div className="w-12 h-12 rounded-full bg-gray-300 flex items-center justify-center text-xl">
                                            {chat.avatar}
                                        </div>
                                        {chat.status === 'online' && (
                                            <div className="absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white"></div>
                                        )}
                                    </div>
                                    
                                    <div className="flex-1 min-w-0">
                                        <div className="flex justify-between items-baseline">
                                            <h3 className="font-semibold text-gray-900 truncate">{chat.name}</h3>
                                            <span className="text-xs text-gray-500">{chat.time}</span>
                                        </div>
                                        <div className="flex justify-between items-center mt-1">
                                            <p className="text-sm text-gray-600 truncate">{chat.lastMessage}</p>
                                            {chat.unread > 0 && (
                                                <span className="bg-teal-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">
                                                    {chat.unread}
                                                </span>
                                            )}
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>

                    {/* منطقة المحادثة */}
                    <div className={`flex-1 flex flex-col ${isMobile && activeChat ? 'mobile-chat-area' : ''}`}>
                        {activeChat ? (
                            <>
                                {/* هيدر المحادثة */}
                                <div className="bg-white border-b border-gray-200 p-4 flex justify-between items-center">
                                    <div className="flex items-center">
                                        {isMobile && (
                                            <button onClick={backToChats} className="ml-3 text-gray-600 hover:text-teal-600">
                                                <ArrowRight size={20} />
                                            </button>
                                        )}
                                        <div className="w-10 h-10 rounded-full bg-gray-300 flex items-center justify-center text-lg ml-3">
                                            {activeChat.avatar}
                                        </div>
                                        <div>
                                            <h2 className="font-semibold text-gray-900">{activeChat.name}</h2>
                                            <p className="text-sm text-gray-500">
                                                {activeChat.status === 'online' ? 'متصل الآن' : 'آخر ظهور منذ قليل'}
                                            </p>
                                        </div>
                                    </div>
                                    
                                    <div className="flex gap-4">
                                        <Phone className="text-gray-600 cursor-pointer hover:text-teal-600" size={20} />
                                        <Video className="text-gray-600 cursor-pointer hover:text-teal-600" size={20} />
                                        <MoreVertical className="text-gray-600 cursor-pointer hover:text-teal-600" size={20} />
                                    </div>
                                </div>

                                {/* منطقة الرسائل */}
                                <div className="flex-1 overflow-y-auto p-4 bg-gray-50 scrollbar-hide">
                                    {activeChat.messages.map(msg => (
                                        <div
                                            key={msg.id}
                                            className={`flex mb-4 message-enter ${msg.sender === 'me' ? 'justify-end' : 'justify-start'}`}
                                        >
                                            <div className={`max-w-xs lg:max-w-md px-4 py-2 rounded-lg shadow-sm ${
                                                msg.sender === 'me'
                                                    ? 'bg-teal-600 text-white rounded-br-none'
                                                    : 'bg-white text-gray-800 border rounded-bl-none'
                                            }`}>
                                                {msg.senderName && msg.sender !== 'me' && (
                                                    <p className="text-xs text-teal-600 font-semibold mb-1">{msg.senderName}</p>
                                                )}
                                                <p className="leading-relaxed">{msg.text}</p>
                                                <p className={`text-xs mt-1 ${
                                                    msg.sender === 'me' ? 'text-teal-100' : 'text-gray-500'
                                                }`}>
                                                    {msg.time}
                                                </p>
                                            </div>
                                        </div>
                                    ))}
                                    <div ref={messagesEndRef} />
                                </div>

                                {/* حقل كتابة الرسالة */}
                                <div className="bg-white border-t border-gray-200 p-4">
                                    <div className="flex items-center gap-2">
                                        <button className="text-gray-600 hover:text-teal-600 transition-colors">
                                            <Paperclip size={20} />
                                        </button>
                                        
                                        <div className="flex-1 flex items-center bg-gray-100 rounded-full px-4 py-2">
                                            <input
                                                type="text"
                                                placeholder="اكتب رسالة..."
                                                className="flex-1 bg-transparent border-none outline-none text-right"
                                                value={message}
                                                onChange={(e) => setMessage(e.target.value)}
                                                onKeyPress={handleKeyPress}
                                            />
                                        </div>
                                        
                                        {message.trim() ? (
                                            <button
                                                onClick={sendMessage}
                                                className="bg-teal-600 text-white p-2 rounded-full hover:bg-teal-700 transition-colors"
                                            >
                                                <Send size={18} />
                                            </button>
                                        ) : (
                                            <button className="text-gray-600 hover:text-teal-600 transition-colors">
                                                <Mic size={20} />
                                            </button>
                                        )}
                                    </div>
                                </div>
                            </>
                        ) : (
                            <div className="flex-1 flex items-center justify-center bg-gray-50">
                                <div className="text-center">
                                    <div className="w-32 h-32 bg-gradient-to-br from-teal-500 to-teal-600 rounded-full flex items-center justify-center text-white text-4xl mb-6 mx-auto shadow-lg">
                                        💬
                                    </div>
                                    <h2 className="text-2xl font-bold text-gray-800 mb-2">مرحباً بك في زولي</h2>
                                    <p className="text-gray-600 mb-4">اختر محادثة لبدء المراسلة</p>
                                    <div className="text-sm text-gray-500">
                                        <p>🚀 هذه نسخة تجريبية للعرض والاختبار</p>
                                        <p>جرب إرسال الرسائل والتنقل بين المحادثات</p>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        ReactDOM.render(<ZoliApp />, document.getElementById('root'));
    </script>

    <!-- معلومات إضافية للمطورين -->
    <div id="share" style="padding: 20px; background: #f8fafc; border-top: 1px solid #e2e8f0; text-align: center; font-size: 14px; color: #64748b;">
        <h3 style="color: #0f172a; margin-bottom: 10px;">كيفية المشاركة:</h3>
        <p><strong>1.</strong> احفظ هذا الملف باسم "zoli-demo.html"</p>
        <p><strong>2.</strong> شاركه مع أصدقائك عبر البريد الإلكتروني أو التخزين السحابي</p>
        <p><strong>3.</strong> يمكن فتحه في أي متصفح بدون الحاجة لاتصال انترنت</p>
        <br>
        <p style="color: #059669;"><strong>💡 نصيحة:</strong> يعمل التطبيق على الجوال والكمبيوتر</p>
    </div>
</body>
</html>